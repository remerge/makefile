# Makefile Framework

Makefile framework for all remerge projects.

## Getting Started

For a new project that does not use the Makefile framework yet, add this
repository as a subtree to the project repository.

```bash
git remote add makefile https://github.com/remerge/makefile
git subtree add --squash --prefix mkf/common makefile main
```

Afterwards `mkf/common/common.mk` can be included in the parent project:

```Makefile
include mkf/common/common.mk
```

## Updating

To update the Makefile framework in the current repository:

```bash
make mkf-update
```

## Available Makefile Targets

| Name      | File         | Description                                                        |
| --------- | ------------ | ------------------------------------------------------------------ |
| help      | help.mk:10   | display this help text                                             |
| generate  | build.mk:8   | generate documentation, schemas, etc                               |
| build     | build.mk:9   | run all build steps and create artifact(s)                         |
| clean     | prepare.mk:3 | remove all build artifacts generated by `make all`                 |
| distclean | prepare.mk:4 | remove all artifacts, caches, dependencies and settings            |
| install   | prepare.mk:5 | prepare environment and install dependencies for all make targets  |
| update    | prepare.mk:6 | update environment and all dependencies to their latest version(s) |
| lint      | test.mk:1    | run code format check, code analysis, security scans, etc          |
| test      | test.mk:2    | run unit and integration tests                                     |
| generate  | build.mk:8   | generate documentation, schemas, etc                               |
| build     | build.mk:9   | run all build steps and create artifact(s)                         |
